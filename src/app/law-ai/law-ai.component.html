<div class="general-container">
  <div class="response-container">
      <div class="response">
        <ng-container *ngFor="let item of data$ | async as data; let i = index">
          <div class="chat-item"  [ngClass]="{'question': i % 2 === 0 || i === 0, 'answer': i % 2 === 1 || i === 1}">
            <ng-container [ngTemplateOutlet]="i % 2 === 0 || i === 0 ? queryTemplate : answerTemplate"
              [ngTemplateOutletContext]="{item: item}">
            </ng-container>
          </div>
        </ng-container>
      </div>
    <mat-spinner *ngIf="isLoading$ | async" class="center__spinner" color="accent" diameter="40"></mat-spinner>
  </div>
  <div class="law-container">
    <form [formGroup]="lawForm" class="law-form">
      <mat-form-field style="width: 50em;color: white;" appearance="fill">
        <mat-label>{{ 'LAW_AI_VIEW.TEXT_LABEL' | translate }}</mat-label>
        <textarea matInput
              [disabled]="isLoading$ | async"
              formControlName="query"
              cdkTextareaAutosize
              #autosize="cdkTextareaAutosize"
              cdkAutosizeMinRows="2"
              cdkAutosizeMaxRows="5"
              (keyup.enter)="submitQuery()"></textarea>
          <button mat-fab extended (click)="submitQuery()">
            <mat-icon><i class="fa-solid fa-magnifying-glass"></i></mat-icon>
          </button>
      </mat-form-field>
    </form>
  </div>
</div>

<ng-template #answerTemplate let-item="item">
    <span class="response-title">{{ 'LAW_AI_VIEW.RESPONSE_LABEL' | translate }}</span>
    <p class="response-item">{{ item }}</p>
</ng-template>

<ng-template #queryTemplate let-item="item">
  <span class="response-title">{{ 'LAW_AI_VIEW.QUERY_LABEL' | translate }}</span>
  <p class="query-item">{{ item }}</p>
</ng-template>

